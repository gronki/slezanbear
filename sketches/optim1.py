#!/usr/bin/env python
# coding: utf-8

#-------------------------------------------------------------------------------

from numpy.random import uniform
a0 = uniform(-2,2)
a1 = uniform(-1,1) / 2
a2 = uniform(-3,3)
a3 = uniform(0,1)
a4 = uniform(-10,10)
a5 = uniform(-0.5,1) / 36
f = lambda x: a1*(-a0 + x) + a3*(-a2 + x)**2/2 + a5*(-a4 + x)**4/4
fx = lambda x: a1 + a3*(-2*a2 + 2*x)/2 + a5*(-a4 + x)**3
fxx = lambda x: a3 + 3*a5*(a4 - x)**2
nsteps = 15

#-------------------------------------------------------------------------------

from numpy import zeros
X = zeros(nsteps) + uniform(-4,4)

#-------------------------------------------------------------------------------

for i in range(1,nsteps):
    X[i] = X[i-1] - fx(X[i-1]) / fxx(X[i-1])
    print X[i], f(X[i])

#-------------------------------------------------------------------------------

from numpy import linspace
x0 = linspace(-8,8,256)

import matplotlib.pyplot as plt
fig,ax = plt.subplots()
ax.plot(x0, f(x0), linewidth = 1.5, color = 'black')
ax.plot(X, f(X), color = 'red')

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------

plt.savefig('/tmp/optim1.png')

#-------------------------------------------------------------------------------
